JIE.FGO={events:{},ui:{},component:{},normal:{}};typeof FGO=="undefined"?FGO=JIE.FGO:JIE.debug&&alert("namespace FGO 已經存在");FGO.normal.main=function(){function ct(){for(var n in i)i[n].value=0;for(n in s)s[n].value=0;y.value=w}function lt(){var r,f,u=!1;n={};n.target_item={};n.event={};n.schedule=null;for(r in i)i[r].value>0&&(n.target_item[r]=i[r].value,u||(u=!0));for(r in s)s[r].value>0&&(n.target_item[r]=s[r].value,u||(u=!0));for(t=0,v=nt.children.length;t<v;t++)f=nt.children[t],f.type==="checkbox"&&f.checked&&(n.event[f.value]=1);return n.schedule=y.value,u}function at(n){for(var u=e.chess_and_stone.name_list,f=e.chess_and_stone.class_list,a=u.length,r,v=f.length,t,s,h,c,o,l={},i=0;i<a;i+=1){for(o=NewObj("table","grid"),t=NewObj("tr","tr"),t.appendChild(NewObj("td","header","名稱")),t.appendChild(NewObj("td","header","數量")),o.appendChild(t),r=0;r<v;r+=1)t=NewObj("tr","tr"),h=ft(),s=NewObj("td","",NewObj("span","",f[r]+u[i])),c=NewObj("div","question","?"),c.value=f[r]+u[i],s.appendChild(c),t.appendChild(s),t.appendChild(NewObj("td","",h)),l[f[r]+u[i]]=h,o.appendChild(t);n.appendChild(o)}return n.addEventListener("click",function(){var n=event.target;n.classList.contains("question")&&k(n.value)}),l}function vt(n){function o(n,t){for(var r,u,f,e,s={},i=0,o=t.length;i<o;i++)r=NewObj("tr"),u=NewObj("td","",NewObj("span","",t[i])),e=NewObj("div","question","?"),e.value=t[i],u.appendChild(e),f=ft(),r.appendChild(u),r.appendChild(NewObj("td","",f)),n.appendChild(r),s[t[i]]=f;return s}var l=e.other_items.copper,a=e.other_items.silver,v=e.other_items.gold,t,s,h,c,i={},f=NewObj("table","copper grid"),r,u;return t=NewObj("tr"),t.appendChild(NewObj("td","header","銅素材名稱")),t.appendChild(NewObj("td","header","數量")),f.appendChild(t),s=o(f,l),r=NewObj("table","silver grid"),t=NewObj("tr"),t.appendChild(NewObj("td","header","銀素材名稱")),t.appendChild(NewObj("td","header","數量")),r.appendChild(t),h=o(r,a),u=NewObj("table","gold grid"),t=NewObj("tr"),t.appendChild(NewObj("td","header","金素材名稱")),t.appendChild(NewObj("td","header","數量")),u.appendChild(t),c=o(u,v),n.appendChild(f),n.appendChild(r),n.appendChild(u),JIE.base.marge(i,s),JIE.base.marge(i,h),JIE.base.marge(i,c),n.addEventListener("click",function(){var n=event.target;n.classList.contains("question")&&k(n.value)}),i}function ft(){var n=NewObj("input"),t;return n.type="text",n.value="0",t=0,n.addEventListener("change",function(){var n=Number(this.value);isNaN(n)?this.value=t:t=this.value=n>=0?n:0}),n}function yt(n,t){for(var r,i=0,u=t.length;i<u;i++)r=NewObj("option","",t[i]),r.value=t[i],n.appendChild(r);return n}function pt(t){for(var y,h,g,v,p,e,u,b,s,d,i,w;l.firstChild;)l.removeChild(l.firstChild);while(a.firstChild)a.removeChild(a.firstChild);result.classList.remove("hide");et.innerText=t.AP;y=NewObj("table","grid");h=NewObj("tr");h.appendChild(NewObj("td","header","種類"));h.appendChild(NewObj("td","header","區域"));h.appendChild(NewObj("td","header","副本"));h.appendChild(NewObj("td","header","次數"));l.appendChild(y);y.appendChild(h);b=["每日任務"].concat(c);for(g in b){i=b[g];for(v in t.quest_count_list[i])for(p in t.quest_count_list[i][v])t.quest_count_list[i][v][p]!==0&&(e=NewObj("tr"),e.appendChild(NewObj("td","",i)),e.appendChild(NewObj("td","",v)),e.appendChild(NewObj("td","",p)),e.appendChild(NewObj("td","",t.quest_count_list[i][v][p])),y.appendChild(e))}for(f===null&&(f=o.querySelector(".target_item").cloneNode(!0)),e=f.querySelectorAll("tr"),i=0,w=e.length;i<w;i+=1)(u=e[i].querySelectorAll("td"),u[0].classList.contains("header"))||(s=u[0].querySelector("span").innerText,t.item_list[s]?n.target_item[s]?(u[0].classList.add("finish"),u[0].classList.remove("no_enough"),u[1].innerText=Math.round(t.item_list[s]*1e3)/1e3):u[1].innerText=Math.round(t.item_list[s]*100)/100:n.target_item[s]?(u[0].classList.add("not_enough"),u[0].classList.remove("finish"),u[1].innerText=n.target_item[s]*-1):u[1].innerText=0);for(a.appendChild(f),d=r.querySelectorAll(".unfold_btn"),i=0,w=d.length;i<w;i+=1)d[i].onclick=function(){var n=this.parentNode.parentNode.querySelector(".grid_area");n.classList.toggle("unfold");n.classList.toggle("fold");this.value==="1"?(this.value="0",this.innerText="-"):(this.value="1",this.innerText="+")};f.addEventListener("click",function(){var n=event.target;n.classList.contains("question")&&k(event.target.parentNode.querySelector("span").innerText)})}function k(n){var r=NewObj("table","grid"),e,t,f,i;t=NewObj("tr");t.appendChild(NewObj("td","header","種類"));t.appendChild(NewObj("td","header","區域"));t.appendChild(NewObj("td","header","副本"));t.appendChild(NewObj("td","header","AP"));t.appendChild(NewObj("td","header","掉落率"));t.appendChild(NewObj("td","header","1個/AP"));r.appendChild(t);for(e in g[n])f=g[n][e],i=f.type,t=NewObj("tr"),t.appendChild(NewObj("td","",i[0])),t.appendChild(NewObj("td","",i[1])),t.appendChild(NewObj("td","",i[2])),t.appendChild(NewObj("td","",d[i[0]][i[1]][i[2]].AP)),t.appendChild(NewObj("td","",Math.round(d[i[0]][i[1]][i[2]].drop[n]*1e3)/1e3)),t.appendChild(NewObj("td","",Math.round(f.CP*1e3)/1e3)),r.appendChild(t);u.set_title(n);u.set_contain(r);u.show()}var h=FGO.normal.quest_data_manager(),d=h.get_all_quest_list(),c=h.get_schedule(),e=h.get_item_list(),g=h.get_item2quest_list(),o=document.querySelector("#user_input"),i=at(o.querySelector(".chess .grid_area")),s=vt(o.querySelector(".item .grid_area")),y=yt(o.querySelector(".schedule"),c),nt=document.querySelector("#user_input .event"),r=document.querySelector("#result"),ht,u,f,p,t,v,tt,it,n,w,rt,ut,b;r.classList.add("hide");var l=r.querySelector(".quest .grid_area"),a=r.querySelector(".item"),et=r.querySelector(".AP_result"),ot=NewObj("table","grid_area"),st=NewObj("div","not_enough",NewObj("span","title_2","無法獲得物品數"));for(st.appendChild(ot),ht=!1,u=JIE.component.dialog.factory("simple"),u.hide(),u.render(document.body),f=null,p=o.querySelectorAll(".unfold_btn"),t=0,v=p.length;t<v;t+=1)p[t].onclick=function(){var n=this.parentNode.parentNode.querySelector(".grid_area");n.classList.toggle("unfold");n.classList.toggle("fold");this.value==="1"?(this.value="0",this.innerText="-"):(this.value="1",this.innerText="+")};if(JIE.debug){tt=0;for(it in i)i[it].value=1,tt+=1}n={};n.target_item={};n.event={};n.schedule=null;w=c[c.length-1];y.value=w;rt=document.querySelector("#user_input .reset");ut=document.querySelector("#user_input .start");rt.onclick=function(){ct()};ut.onclick=function(){var i=lt(),t=null;i&&(b.set_data(n),t=b.get_minimization(),pt(t),r.classList.remove("hide"),window.scrollTo(0,r.scrollHeight))};b=FGO.normal.minimized_method()};window.onload=function(){FGO.normal.main()};FGO.normal.quest_data_manager=function(){function e(){var i={},r,u,e,t,f;for(r in n)for(u in n[r])for(e in n[r][u]){f=n[r][u][e];for(t in f.drop)i[t]===undefined&&(i[t]=[]),i[t].push({type:[r,u,e],CP:f.drop[t]/f.AP})}for(t in i)i[t].sort(function(n,t){return n.CP>t.CP?-1:n.CP<t.CP?1:0});return i}function o(t){if(t===undefined)return[];var i=[],c=t.quest_list||[],a=t.item_list||[],r,l,u,f,s,e,o,h;for(u in n)if(c[u]!==undefined)for(f in n[u])for(s in n[u][f]){o=n[u][f][s];h=!1;for(e in c)if(o.drop[e]){h=!0;break}h&&i.push({type:[u,f,s]})}for(r=0,l=i.length;r<l;r++){i[r].kind=0;o=n[i[r].type[0]][i[r].type[1]][i[r].type[2]];for(e in a)o.drop[e]&&(i[r].kind+=1)}return i}function s(i){if(i===undefined)return[];var u={},a={},d=i.quest_list||[],c=i.item_list||[],r,v,e,y,p,o,l,w,b,h,s,f,k={};for(v in c)for(r=c[v],u[r]===undefined&&(u[r]=[]),e=0,y=t[r].length;e<y;e++)if(p=t[r][e].type[0],JIE.array.includes(p,d)){if(u[r].length===0)u[r].push(t[r][e]);else{if(f=u[r][u[r].length-1],s=n[f.type[0]][f.type[1]][f.type[2]],f=t[r][e],h=n[f.type[0]][f.type[1]][f.type[2]],h===s)continue;l=!1;for(o in s.drop)if(JIE.array.includes(o,c)&&!k[o]&&(w=s.drop[o]/s.AP,b=h.drop[o]/h.AP,b>w)){l=!0;break}l&&u[r].push(t[r][e])}k[r]=1}return JIE.base.extendDeep(a,u),a}function h(n){var f=[],i={},e,s,t,r,u,o;for(e in n)for(s in n[e])t=n[e][s].type,i[t[0]]===undefined&&(i[t[0]]={}),i[t[0]][t[1]]===undefined&&(i[t[0]][t[1]]={}),i[t[0]][t[1]][t[2]]===undefined&&(i[t[0]][t[1]][t[2]]=0),i[t[0]][t[1]][t[2]]+=1;for(r in i)for(u in i[r])for(o in i[r][u])f.push({type:[r,u,o],target_item_count:i[r][u][o]});return f.sort(function(n,t){return t.target_item_count-n.target_item_count}),f}var f=["特異點F","第一特異點","第二特異點","第三特異點","第四特異點","第五特異點","第六特異點"],i={"每日任務":{"週日 劍之修鍊場":{"初級":{AP:10,drop:{"劍之輝石":1.2603,"英雄之證":.145,"虛影之塵":.0533,"無間齒輪":.0475,"龍之牙":.045,"兇骨":.235,"劍階銀棋":.2167,"劍階金像":.02}},"中級":{AP:20,drop:{"劍之輝石":.9956,"劍之魔石":.6416,"世界樹之種":.1392,"英雄之證":.14,"虛影之塵":.1467,"無間齒輪":.1017,"劍階銀棋":.6833,"劍階金像":.0717}},"上級":{AP:30,drop:{"劍之輝石":.3017,"劍之魔石":1.2249,"劍之秘石":.0133,"鳳凰羽毛":.18,"世界樹之種":.2967,"英雄之證":.165,"虛影之塵":.225,"無間齒輪":.1533,"劍階銀棋":1.0416,"劍階金像":.35}},"超級":{AP:40,drop:{"劍之輝石":.3217,"劍之魔石":1.1333,"劍之秘石":.2433,"鳳凰羽毛":.13,"世界樹之種":.3533,"英雄之證":.215,"虛影之塵":.2733,"無間齒輪":.25,"劍階銀棋":.77,"劍階金像":.5533}}},"週一 弓之修鍊場":{"初級":{AP:10,drop:{"弓之輝石":1.3363,"英雄之證":.0917,"虛影之塵":.0533,"龍之牙":.0367,"隕蹄鐵":.0493,"兇骨":.2367,"弓階銀棋":.2167,"弓階金像":.02}},"中級":{AP:20,drop:{"弓之輝石":1.3632,"弓之魔石":.3833,"鳳凰羽毛":.0067,"世界樹之種":.1383,"英雄之證":.0733,"虛影之塵":.1467,"龍之牙":.0067,"隕蹄鐵":.1033,"兇骨":.3033,"弓階銀棋":.6833,"弓階金像":.0717}},"上級":{AP:30,drop:{"弓之輝石":.1917,"弓之魔石":1.5443,"弓之秘石":.1367,"鳳凰羽毛":.1017,"世界樹之種":.145,"英雄之證":.135,"虛影之塵":.22,"隕蹄鐵":.1498,"弓階銀棋":1.0833,"弓階金像":.3533}},"超級":{AP:40,drop:{"弓之輝石":.19,"弓之魔石":1.305,"弓之秘石":.284,"鳳凰羽毛":.205,"世界樹之種":.1975,"英雄之證":.185,"虛影之塵":.24,"隕蹄鐵":.225,"弓階銀棋":.8166,"弓階金像":.5766}}},"週二 槍之修鍊場":{"初級":{AP:10,drop:{"槍之輝石":1.175,"英雄之證":.1302,"虛影之塵":.0533,"人工生命體幼體":.05,"兇骨":.27,"槍階銀棋":.2167,"槍階金像":.02}},"中級":{AP:20,drop:{"槍之輝石":1.1466,"槍之魔石":.6266,"世界樹之種":.12,"英雄之證":.068,"虛影之塵":.1467,"人工生命體幼體":.1033,"兇骨":.1686,"槍階銀棋":.6833,"槍階金像":.0717}},"上級":{AP:30,drop:{"槍之輝石":.1833,"槍之魔石":1.5443,"槍之秘石":.11,"鳳凰羽毛":.0867,"世界樹之種":.205,"英雄之證":.135,"虛影之塵":.22,"人工生命體幼體":.1573,"槍階銀棋":1.0333,"槍階金像":.3533}},"超級":{AP:40,drop:{"槍之輝石":.1913,"槍之魔石":1.29,"槍之秘石":.2366,"鳳凰羽毛":.1333,"世界樹之種":.265,"英雄之證":.185,"虛影之塵":.2733,"人工生命體幼體":.2367,"槍階銀棋":.8,"槍階金像":.57}}},"週三 狂之修鍊場":{"初級":{AP:10,drop:{"狂之輝石":1.3667,"英雄之證":.1,"虛影之塵":.038,"八連雙晶":.0553,"狂階銀棋":.1833,"狂階金像":.02}},"中級":{AP:20,drop:{"狂之輝石":1.2908,"狂之魔石":.6125,"英雄之證":.065,"虛影之塵":.1712,"混沌之爪":.03,"八連雙晶":.1178,"狂階銀棋":.6642,"狂階金像":.0783}},"上級":{AP:30,drop:{"狂之輝石":.1833,"狂之魔石":1.5443,"狂之秘石":.11,"英雄之證":.1475,"虛影之塵":.225,"混沌之爪":.06,"八連雙晶":.1207,"狂階銀棋":1.0917,"狂階金像":.3867}},"超級":{AP:40,drop:{"狂之輝石":.18,"狂之魔石":1.16,"狂之秘石":.24,"英雄之證":.2217,"虛影之塵":.2267,"混沌之爪":.09,"八連雙晶":.1517,"狂階銀棋":.8667,"狂階金像":.5633}}},"週四 騎之修鍊場":{"初級":{AP:10,drop:{"騎之輝石":1.1212,"虛影之塵":.0533,"龍之牙":.1717,"隕蹄鐵":.0495,"騎階銀棋":.2167,"騎階金像":.02}},"中級":{AP:20,drop:{"騎之輝石":.9133,"騎之魔石":.9241,"虛影之塵":.1467,"龍之牙":.2875,"隕蹄鐵":.1033,"騎階銀棋":.6833,"騎階金像":.0717}},"上級":{AP:30,drop:{"騎之輝石":.2318,"騎之魔石":1.2108,"騎之秘石":.2367,"虛影之塵":.135,"龍之逆鱗":.03,"龍之牙":.4622,"隕蹄鐵":.145,"騎階銀棋":1.0417,"騎階金像":.3733}},"超級":{AP:40,drop:{"騎之輝石":.198,"騎之魔石":.9933,"騎之秘石":.3866,"虛影之塵":.16,"龍之逆鱗":.08,"龍之牙":.472,"隕蹄鐵":.1875,"騎階銀棋":.8,"騎階金像":.59}}},"週五 術之修鍊場":{"初級":{AP:10,drop:{"術之輝石":1.2267,"術之魔石":.109,"虛影之塵":.1333,"蛇之寶玉":.0742,"禁斷書頁":.05,"術階銀棋":.3167,"術階金像":.02}},"中級":{AP:20,drop:{"術之輝石":.9567,"術之魔石":.7667,"虛影之塵":.22,"蛇之寶玉":.14,"禁斷書頁":.1,"術階銀棋":.825,"術階金像":.0625}},"上級":{AP:30,drop:{"術之輝石":.0453,"術之魔石":1.6989,"術之秘石":.24,"虛影之塵":.2053,"蛇之寶玉":.2177,"禁斷書頁":.1575,"蠻神心臟":.04,"術階銀棋":.945,"術階金像":.318}},"超級":{AP:40,drop:{"術之輝石":.0925,"術之魔石":.8986,"術之秘石":.795,"虛影之塵":.2467,"蛇之寶玉":.2486,"禁斷書頁":.2115,"蠻神心臟":.06,"術階銀棋":.8208,"術階金像":.5658}}},"週六 殺之修鍊場":{"初級":{AP:10,drop:{"殺之輝石":1.3133,"虛影之塵":.1067,"鬼魂提燈":.0333,"無間齒輪":.052,"龍之牙":.1267,"殺階銀棋":.2833,"殺階金像":.02}},"中級":{AP:20,drop:{"殺之輝石":.8259,"殺之魔石":1.0806,"世界樹之種":.0867,"虛影之塵":.16,"鬼魂提燈":.0283,"無間齒輪":.1,"龍之牙":.1767,"殺階銀棋":.6833,"殺階金像":.0783}},"上級":{AP:30,drop:{"殺之輝石":.164,"殺之魔石":1.4065,"殺之秘石":.1333,"世界樹之種":.165,"虛影之塵":.16,"鬼魂提燈":.1642,"無間齒輪":.1547,"龍之牙":.11,"殺階銀棋":1.0333,"殺階金像":.36}},"超級":{AP:40,drop:{"殺之輝石":.1667,"殺之魔石":1.0982,"殺之秘石":.25,"世界樹之種":.3116,"虛影之塵":.1933,"鬼魂提燈":.188,"無間齒輪":.0067,"龍之牙":.1433,"殺階銀棋":.8,"殺階金像":.5767}}}}},r={"特異點F":{"未確認座標X-A":{"宅邸殘跡":{drop:{"兇骨":.075},AP:3}},"未確認座標X-B":{"爆炸中心地":{drop:{"兇骨":.125,"劍之輝石":.15,"槍之輝石":.1},AP:4}},"未確認座標X-C":{"大橋":{drop:{"兇骨":.18,"劍之輝石":.2},AP:4}},"未確認座標X-D":{"鮮紅港口":{drop:{"兇骨":.21,"劍之輝石":.2,"弓之輝石":.2,"槍之輝石":.15},AP:5}},"未確認座標X-E":{"骸骨徬徨的教會":{drop:{"兇骨":.16,"劍之輝石":.2,"弓之輝石":.1,"騎階銀棋":.05},AP:5}},"未確認座標X-F":{"燒盡崩塌地校舍":{drop:{"兇骨":.17,"劍之輝石":.15,"弓之輝石":.15,"槍階銀棋":.05,"殺階銀棋":.05},AP:6}},"未確認座標X-G":{"熊熊燃燒的森林":{drop:{"兇骨":.63,"劍之輝石":.1,"弓之輝石":.05,"槍之輝石":.2,"狂階銀棋":.1,"狂階金像":.04},AP:15}},"變動座標點0號":{"大空洞":{drop:{"龍之牙":.11,"虛影之塵":.08,"劍之輝石":.05,"弓之輝石":.05,"殺之輝石":.2,"劍階銀棋":.1},AP:7}}},"第一特異點":{"棟雷米":{"貞德誕生地":{drop:{"英雄之證":.21,"劍之輝石":.25,"槍之輝石":.1},AP:7}},"沃庫勒爾":{"起始的堡壘":{drop:{"兇骨":.6,"龍之牙":.8,"劍之輝石":.1,"騎之魔石":.2},AP:7}},"拉沙里泰":{"盧瓦爾河畔":{drop:{"英雄之證":.06,"龍之牙":.13,"槍之輝石":.1,"騎之輝石":.33},AP:7}},"汝拉":{"太古之森":{drop:{"龍之牙":.06,"虛影之塵":.08,"世界樹之種":.05,"劍之輝石":.16,"槍之輝石":.16,"騎之輝石":.16,"殺之輝石":.08,"騎階銀棋":.1},AP:7}},"里昂":{"死者之城":{drop:{"英雄之證":.21,"虛影之塵":.08,"劍之輝石":.25,"殺階銀棋":.1},AP:7}},"蒂耶爾":{"刃物之鎮":{drop:{"龍之牙":.13,"虛影之塵":.08,"騎之輝石":.33,"狂階銀棋":.1},AP:7}},"奧爾良":{"命運的堡壘":{drop:{"兇骨":.12,"龍之牙":.11,"虛影之塵":.08,"槍之輝石":.1,"騎之輝石":.16,"騎之魔石":.05,"術階銀棋":.1},AP:8}},"巴黎":{"藝術之都":{drop:{"兇骨":.18,"龍之牙":.09,"虛影之塵":.08,"弓之輝石":.15,"騎之輝石":.1,"騎之魔石":.05,"劍階銀棋":.02,"弓階銀棋":.02,"槍階銀棋":.02},AP:13}}},"第二特異點":{"馬賽":{"毗領地中海":{drop:{"英雄之證":.3,"劍之輝石":.2,"槍之輝石":.25},AP:7}},"波爾多":{"美酒, 乾杯":{drop:{"世界樹之種":.09,"劍之輝石":.08,"槍之輝石":.32,"殺之輝石":.24},AP:7}},"亞壁街道":{"街道女王":{drop:{"英雄之證":.36,"虛影之塵":.08,"劍之輝石":.15,"弓之輝石":.15,"槍之輝石":.1,"狂階銀棋":.1},AP:9}},"羅馬":{"羅馬非一日建成":{drop:{"英雄之證":.24,"劍之輝石":.25,"槍之輝石":.32},AP:9}},"佛羅倫薩":{"花之都":{drop:{"英雄之證":.3,"劍之輝石":.05,"弓之輝石":.3,"槍之輝石":.1},AP:9}},"梅迪奧蘭":{"平原中心":{drop:{"英雄之證":.33,"劍之輝石":.15,"槍之輝石":.2},AP:9}},"瑪西格利亞":{"遠古的港口":{drop:{"英雄之證":.12,"虛影之塵":.16,"劍之輝石":.1,"槍之輝石":.1,"騎階銀棋":.1,"狂階銀棋":.1},AP:9}},"高盧":{"燃燒的戰火":{drop:{"英雄之證":.15,"虛影之塵":.08,"八連雙晶":.05,"弓之輝石":.1,"槍之輝石":.15,"狂之輝石":.15,"劍階銀棋":.1},AP:9}},"有形之島":{"女神的洞窟":{drop:{"兇骨":.21,"虛影之塵":.08,"弓之輝石":.25,"槍之輝石":.05,"狂階銀棋":.1},AP:9}},"聯軍首都":{"羅馬的地平線":{drop:{"英雄之證":.18,"虛影之塵":.08,"八連雙晶":.022,"劍之輝石":.05,"弓之輝石":.1,"狂之輝石":.13,"狂階銀棋":.1},AP:10}},"埃特納火山":{"沸騰的大地":{drop:{"鬼魂提燈":.08,"殺之輝石":.35},AP:9}},"不列顛尼亞":{"濃霧深邃之森":{drop:{"世界樹之種":.11,"劍之輝石":.24,"槍之輝石":.24,"殺之輝石":.16},AP:10}},"日耳曼尼亞":{"黑森林":{drop:{"兇骨":.45,"混沌之爪":.03,"劍之輝石":.05,"弓之輝石":.1,"狂之魔石":.08},AP:15}}},"第三特異點":{"海盜船":{"私掠船團":{drop:{"英雄之證":.57,"劍之輝石":.2,"弓之輝石":.25},AP:12}},"海盜島":{"海盜大本營":{drop:{"英雄之證":.54,"虛影之塵":.12,"弓之輝石":.25,"狂之輝石":.15,"騎階銀棋":.1,"騎階金像":.02},AP:13}},"亡者的居島":{"被詛咒的海盜們":{drop:{"英雄之證":.3,"虛影之塵":.12,"弓之輝石":.15,"狂之輝石":.1,"狂階銀棋":.1,"狂階金像":.02},AP:13}},"地圖上標記的島":{"公牛迷宮":{drop:{"龍之牙":.36,"虛影之塵":.12,"劍之輝石":.25,"弓之輝石":.15,"狂階銀棋":.1,"狂階金像":.02},AP:13}},"潮眼之海":{"自由的海原":{drop:{"英雄之證":.27,"八連雙晶":.114,"弓之輝石":.2,"狂之輝石":.18,"狂之魔石":.05},AP:14}},"翼龍之島":{"龍群的樂園":{drop:{"龍之牙":.48,"騎之輝石":.44,"騎之魔石":.05},AP:14}},"暴風雨海域":{"徬徨的幽靈船":{drop:{"鬼魂提燈":.225,"殺之輝石":.49},AP:15}},"群島":{"寂靜的入海口":{drop:{"英雄之證":.18,"龍之牙":.12,"虛影之塵":.24,"劍之輝石":.3,"術階銀棋":.1,"狂階銀棋":.1,"術階金像":.02,"狂階金像":.02},AP:15},"隠された島":{drop:{"追憶的貝殼":.24,"劍之輝石":.46,"劍之魔石":.05},AP:16}},"暗礁海域":{"船舶墳墓":{drop:{"兇骨":.36,"蛇之寶玉":.135,"弓之輝石":.25,"術之魔石":.15,"術之秘石":.23},AP:17}},"火山臼之島":{"無人發現的島嶼":{drop:{"世界樹之種":.15,"隕蹄鐵":.12,"劍之輝石":.4,"騎之輝石":.32},AP:17}},"豐碩之海":{"秘密航路":{drop:{"世界樹之種":.3,"鳳凰羽毛":.09,"劍之輝石":.16,"弓之魔石":.1,"槍之輝石":.24,"槍之魔石":.05},AP:18}}},"第四特異點":{"舊街":{"濃霧, 馬車與瓦斯燈":{drop:{"無間齒輪":.12,"殺之輝石":.56},AP:15}},"白色教堂":{"貧民窟":{drop:{"虛影之塵":.12,"無間齒輪":.13,"殺之輝石":.4,"殺之魔石":.05,"殺階銀棋":.1,"殺階金像":.02},AP:15}},"倫敦城":{"倫敦金融城":{drop:{"人工生命體幼體":.12,"槍之輝石":.56},AP:15}},"蘇活區":{"魅惑的繁華街":{drop:{"虛影之塵":.16,"無間齒輪":.05,"人工生命體幼體":.08,"槍之輝石":.08,"槍之魔石":.05,"殺之輝石":.08,"殺之魔石":.05,"術階銀棋":.1,"術階金像":.04},AP:16}},"威斯敏斯特":{"蘇格蘭場":{drop:{"虛影之塵":.16,"人工生命體幼體":.12,"槍之輝石":.24,"槍之魔石":.05,"術階銀棋":.1,"術階金像":.04},AP:16}},"攝政公園":{"王室的狩獵場":{drop:{"無間齒輪":.085,"禁斷書頁":.05,"劍之輝石":.24,"劍之魔石":.05,"術之魔石":.24},AP:16}},"克勒肯維爾":{"治癒之井":{drop:{"兇骨":.36,"無間齒輪":.255,"劍之輝石":.2,"殺之輝石":.08,"殺之魔石":.15,"殺之秘石":.03},AP:18}},"薩瑟克":{"博羅市場":{drop:{"兇骨":.27,"人工生命體幼體":.3,"弓之輝石":.15,"槍之輝石":.32,"槍之魔石":.1},AP:19}},"海德公園":{"水晶宮的殘影":{drop:{"兇骨":.36,"無間齒輪":.255,"槍之輝石":.2,"術之輝石":.08,"術之魔石":.15,"術之秘石":.03},AP:20}}},"第五特異點":{"布拉克山":{"聖山":{drop:{"無間齒輪":.16,"弓之輝石":.4},AP:17}},"里弗頓":{"巨大河床":{drop:{"英雄之證":.45,"虛影之塵":.32,"劍之輝石":.15,"弓之輝石":.05,"槍之輝石":.05,"槍之秘石":.08,"槍階銀棋":.2,"槍階金像":.08},AP:17}},"丹佛":{"里高之城":{drop:{"虛影之塵":.12,"無間齒輪":.15,"弓之輝石":.24,"弓之魔石":.1,"槍之秘石":.02,"槍階銀棋":.1,"槍階金像":.02},AP:17}},"德明":{"新芝加哥":{drop:{"龍之牙":.6,"騎之輝石":.39,"騎之魔石":.05},AP:17}},"拉伯克":{"德州騎警":{drop:{"英雄之證":.54,"黑獸脂":.12,"劍之輝石":.2,"弓之輝石":.1,"殺之魔石":.08},AP:18}},"達拉斯":{"牛鎮體育館":{drop:{"英雄之證":.66,"弓之輝石":.1,"槍之輝石":.25},AP:18}},"亞力山德里亞":{"威克斯島":{drop:{"英雄之證":.54,"血之淚石":.12,"劍之輝石":.15,"弓之輝石":.05,"弓之魔石":.08,"槍之輝石":.1},AP:18}},"阿爾卡特拉斯島":{"監獄島":{drop:{"英雄之證":.54,"虛影之塵":.12,"劍之輝石":.05,"槍之輝石":.25,"狂階銀棋":.1,"狂階金像":.02},AP:18}},"得梅因":{"監視據點":{drop:{"虛影之塵":.16,"世界樹之種":.09,"混沌之爪":.2,"槍之秘石":.04,"殺之魔石":.09,"狂之魔石":.08,"槍階銀棋":.1,"槍階金像":.04},AP:18}},"卡尼":{"大平原":{drop:{"英雄之證":.54,"戰馬的幼角":.12,"劍之輝石":.15,"槍之輝石":.15,"槍之魔石":.08},AP:18}},"蒙哥馬利":{"南國醫戀(Hart of Dixie)":{drop:{"英雄之證":.63,"虛影之塵":.16,"弓之輝石":.3,"弓階銀棋":.1,"弓階金像":.04},AP:18}},"夏洛特":{"掏金熱":{drop:{"英雄之證":.48,"虛影之塵":.64,"弓之輝石":.1,"槍之輝石":.1,"槍之秘石":.04,"術之輝石":.05,"槍階銀棋":.1,"狂階銀棋":.3,"槍階金像":.04,"狂階金像":.12},AP:20}},"華盛頓":{"特別行政區":{drop:{"英雄之證":.54,"精靈根":.08,"劍之輝石":.15,"劍之秘石":.03,"弓之輝石":.05,"槍之輝石":.05,"術之輝石":.05},AP:20}},"芝加哥":{"風之城":{drop:{"無間齒輪":.4,"弓之輝石":.24,"弓之魔石":.15,"弓之秘石":.03},AP:21}}},"第六特異點":{"沙塵暴的沙漠":{"神獸之庭":{drop:{"兇骨":.63,"智慧之聖甲蟲像":.08,"劍之輝石":.1,"弓之輝石":.1,"槍之輝石":.1,"術之秘石":.03},AP:19}},"黎明的沙丘":{"灼熱之巔":{drop:{"蛇之寶玉":.15,"封魔之燈":.12,"術之輝石":.15,"術之魔石":.47},AP:19}},"死之荒野":{"熱血沸騰的狂宴":{drop:{"愚者之鎖":.66,"殺之輝石":.2,"狂之輝石":.15},AP:19}},"東之村":{"已然枯萎的山脊":{drop:{"龍之牙":.42,"戰馬的幼角":.16,"槍之魔石":.08},AP:19}},"圓桌要塞":{"游擊騎士隊":{drop:{"英雄之證":.45,"大騎士勳章":.187,"劍之輝石":.1,"劍之魔石":.1,"槍之輝石":.15,"槍之魔石":.1},AP:19}},"晚鐘廟":{"宣告死亡的天使":{drop:{"鬼魂提燈":.31,"殺之輝石":.47,"殺之魔石":.02},AP:19}},"西之村遺跡":{"無情的殘影":{drop:{"虛影之塵":.458,"殺之輝石":.48,"殺階銀棋":.1,"殺階金像":.04},AP:20}},"阿特拉斯院":{"巨人的地窖":{drop:{"無間齒輪":.217,"禁斷書頁":.09,"弓之輝石":.15,"術之魔石":.08,"殺之輝石":.1},AP:20}},"隱密之村":{"夢幻的海市蜃樓":{drop:{"愚者之鎖":.315,"封魔之燈":.16,"術之魔石":.08,"殺之輝石":.1,"狂之輝石":.05},AP:21}},"大神殿":{"太陽王的居城":{drop:{"愚者之鎖":.42,"智慧之聖甲蟲像":.12,"術之秘石":.06,"殺之輝石":.05,"狂之輝石":.15},AP:22}},"聖都正門":{"祝聖之門":{drop:{"大騎士勳章":.3,"劍之魔石":.1,"弓之魔石":.05,"槍之魔石":.1},AP:20}},"聖都市街":{"理想都市":{drop:{"英雄之證":.36,"八連雙晶":.27,"精靈根":.12,"劍之輝石":.05,"劍之秘石":.03,"槍之輝石":.1,"狂之秘石":.09},AP:20}},"王城":{"千年王國":{drop:{"虛影之塵":.16,"大騎士勳章":.35,"劍之魔石":.25,"劍階銀棋":.1,"劍階金像":.04},AP:21}},"無之大地":{"荒涼世界":{drop:{"隕蹄鐵":.45,"弓之輝石":.08,"弓之秘石":.03,"騎之輝石":.16,"騎之魔石":.05,"騎之秘石":.06,"殺之魔石":.05},AP:22}}}},n={},u,t;return JIE.base.margeDeep(n,i),JIE.base.margeDeep(n,r),u={chess_and_stone:{class_list:["劍","弓","槍","騎","術","殺","狂"],name_list:["之輝石","之魔石","之秘石","階銀棋","階金像"]},other_items:{copper:["英雄之證","兇骨","龍之牙","虛影之塵","愚者之鎖"],silver:["世界樹之種","鬼魂提燈","八連雙晶","蛇之寶玉","鳳凰羽毛","無間齒輪","禁斷書頁","人工生命體幼體","隕蹄鐵","大騎士勳章","追憶的貝殼"],gold:["混沌之爪","蠻神心臟","龍之逆鱗","精靈根","戰馬的幼角","血之淚石","黑獸脂","封魔之燈","智慧之聖甲蟲像"]}},t=e(),{get_schedule:function(){var n=[];return JIE.base.extend(n,f),n},get_every_data_quest_list:function(){var n={};return JIE.base.extendDeep(n,i),n},get_free_quest_list:function(){var n={};return JIE.base.extendDeep(n,r),n},get_all_quest_list:function(){return list={},JIE.base.extendDeep(list,n),list},get_quest_list_by_filter:function(n){return o(n)},get_item_list:function(){var n={};return JIE.base.extendDeep(n,u),n},get_item2quest_list:function(){var n={};return JIE.base.extendDeep(n,t),n},get_item2quest_list_by_filter:function(n){return s(n)},transform_item2quest:function(n){return h(n)}}};FGO.normal.minimized_method=function(){function y(){return p(),w(),b(),d(),n}function p(){u=null;f=null;e=[];c=[];r={};n={quest_count_list:{},AP:null,item_list:{},no_support:{item_list:{},length:0}};t={}}function w(){var n,r,u,f;JIE.base.extendDeep(t,l);for(n in t){if(n==="每日任務"){if(i.event["訓練場體力減半"]!=1)continue}else if(i.event["FQ體力減半"]!=1)continue;for(r in t[n])for(u in t[n][r])f=Math.floor(t[n][r][u].AP/2),t[n][r][u].AP=f!==0?f:1}}function b(){var h={},a,v,p,b,k,r,y,n,d,l,s,w;for(h.quest_list=[],h.item_list=[],a=o.get_schedule(),h.quest_list.push("每日任務"),n=0,d=a.length;n<d;n+=1)if(h.quest_list.push(a[n]),a[n]===i.schedule)break;for(l in i.target_item)h.item_list.push(l);for(f=o.get_item2quest_list_by_filter(h),u=o.transform_item2quest(f),w=u.length,n=0;n<w;n+=1)if(u[n].need_optimize!==!0){for(v=!1,r=u[n].type,b=t[r[0]][r[1]][r[2]],y=[],s=n+1;s<w;s+=1)if(u[s].need_optimize!==!0){p=!1;r=u[s].type;k=t[r[0]][r[1]][r[2]];for(l in b.drop)if(i.target_item[l]&&f[l].length!==1&&k.drop[l]){p=!0;u[s].need_optimize=!0;break}p&&(v||(v=!0),u[n].need_optimize===undefined&&(u[n].need_optimize=!0,y.push(u[n])),y.push(u[s]))}v?e.push(y):c.push(u[n])}}function k(){var e,s,c,u,o;for(e in f){if(!f[e].length){n.no_support.item_list[e]=i.target_item[e];n.no_support.length+=1;continue}s=i.target_item[e];u=f[e][0].type;c=t[u[0]][u[1]][u[2]];o=Math.ceil(s/c.drop[e]);r[u[0]]===undefined&&(r[u[0]]={});r[u[0]][u[1]]===undefined&&(r[u[0]][u[1]]={});r[u[0]][u[1]][u[2]]===undefined?r[u[0]][u[1]][u[2]]=o:r[u[0]][u[1]][u[2]]<o&&(r[u[0]][u[1]][u[2]]=o)}a=h(r)}function d(){var a,c,p,y,w,l,b,o,d,nt,u,tt;if(k(),e.length!==0){for(p in e){for(y=g(e[p]),c=null,a=0;a<v;a+=1)w=new JIE.optimization.PSO(y),l=w.play(),c===null?c=l:c.fit>l.fit&&(c=l);b=it(c,y.quest_list);JIE.base.margeDeep(n.quest_count_list,b)}function it(n,t){var r={},i;for(var u in t)i=t[u].type,r[i[0]]===undefined&&(r[i[0]]={}),r[i[0]][i[1]]===undefined&&(r[i[0]][i[1]]={}),r[i[0]][i[1]][i[2]]=n.args[u];return r}n.item_list=s(n.quest_count_list);for(o in i.target_item)n.item_list[o]>i.target_item[o]||f[o].length&&(d=i.target_item[o]-(n.item_list[o]||0),u=f[o][0].type,tt=t[u[0]][u[1]][u[2]],nt=Math.ceil(d/tt.drop[o]),n.quest_count_list[u[0]]===undefined&&(n.quest_count_list[u[0]]={}),n.quest_count_list[u[0]][u[1]]===undefined&&(n.quest_count_list[u[0]][u[1]]={}),n.quest_count_list[u[0]][u[1]][u[2]]===undefined&&(n.quest_count_list[u[0]][u[1]][u[2]]=0),n.quest_count_list[u[0]][u[1]][u[2]]+=nt);n.item_list=s(n.quest_count_list);n.AP=h(n.quest_count_list)}else n.quest_count_list=r,n.AP=h(r),n.item_list=s(r);return n}function g(n){function e(){var i={};return i.length=n.length,i.get_fit=function(){for(var f=n.length,r,u=0,i=0;i<f;i++)r=n[i].type,u+=t[r[0]][r[1]][r[2]].AP*arguments[i];return u},i}function o(){for(var h=[],r,o,f,e,s,u=0,c=n.length;u<c;u+=1){f=n[u].type;o=t[f[0]][f[1]][f[2]];r=0;for(e in o.drop)i.target_item[e]&&(s=Math.ceil(i.target_item[e]/o.drop[e]),s>r&&(r=s));h.push({min:0,max:r})}return h}function s(){for(var i=[],t=0,r=n.length;t<r;t+=1)i.push(Math.ceil(u.bound[t].max/10));return i}function h(r,u){var e,s,c,l={},a,h=[],o;JIE.base.extend(h,r);for(e in h){h[e]<u[e].min&&(h[e]=u[e].min);h[e]>u[e].max&&(h[e]=u[e].max);s=n[e].type;c=t[s[0]][s[1]][s[2]];for(o in c.drop)i.target_item[o]&&(l[o]===undefined&&(l[o]=0),l[o]+=c.drop[o]*h[e])}for(o in i.target_item)if((l[o]||0)<i.target_item[o]){if(!f[o].length)continue;a=i.target_item[o]-l[o];s=f[o][0].type;c=t[s[0]][s[1]][s[2]];for(e in n)n[e].type.toString()===s.toString()&&(h[e]+=Math.ceil(a/c.drop[o]))}return h}function c(){var f,e=[],o=0,i,u;for(f in n)i=n[f].type,u=r[i[0]]&&r[i[0]][i[1]]&&r[i[0]][i[1]][i[2]]?r[i[0]][i[1]][i[2]]:0,e.push(u),o+=t[i[0]][i[1]][i[2]].AP*u;return{args:e,fit:o}}var u={};return u.quest_list=n,u.fn=e(),u.bound=o(),u.v_max=s(),u.fixed_method=h,u.is_integer=!0,u.is_minimazation=!0,u.g_best=c(),u.p_max=40,u.iter_max=4e3,u.no_change_limit=20,u}function s(n){var u={},i,e,o,r,f,s;for(r in n)for(f in n[r])for(s in n[r][f])if(e=n[r][f][s],e){o=t[r][f][s];for(i in o.drop)u[i]===undefined&&(u[i]=0),u[i]+=e*o.drop[i]}return u}function h(n){var i,r,u,f=0,e;for(i in n)for(r in n[i])for(u in n[i][r])e=n[i][r][u],f+=t[i][r][u].AP*e;return f}var o=FGO.normal.quest_data_manager(),i=null,l=o.get_all_quest_list(),t=null,u=null,f=null,e=[],c=[],r=null,n=null,a=0,v=3;return{set_data:function(n){i=n},get_minimization:function(){return y()}}};