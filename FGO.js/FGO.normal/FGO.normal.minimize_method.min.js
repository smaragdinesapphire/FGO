FGO.normal.minimized_method=function(){function y(){return p(),w(),b(),d(),n}function p(){u=null;f=null;e=[];c=[];r={};n={quest_count_list:{},AP:null,item_list:{},no_support:{item_list:{},length:0}};t={}}function w(){var n,r,u,f;JIE.base.extendDeep(t,l);for(n in t){if(n==="每日任務"){if(i.event["訓練場體力減半"]!=1)continue}else if(i.event["FQ體力減半"]!=1)continue;for(r in t[n])for(u in t[n][r])f=Math.floor(t[n][r][u].AP/2),t[n][r][u].AP=f!==0?f:1}}function b(){var h={},a,v,p,b,k,r,y,n,d,l,s,w;for(h.quest_list=[],h.item_list=[],a=o.get_schedule(),h.quest_list.push("每日任務"),n=0,d=a.length;n<d;n+=1)if(h.quest_list.push(a[n]),a[n]===i.schedule)break;for(l in i.target_item)h.item_list.push(l);for(f=o.get_item2quest_list_by_filter(h),u=o.transform_item2quest(f),w=u.length,n=0;n<w;n+=1)if(u[n].need_optimize!==!0){for(v=!1,r=u[n].type,b=t[r[0]][r[1]][r[2]],y=[],s=n+1;s<w;s+=1)if(u[s].need_optimize!==!0){p=!1;r=u[s].type;k=t[r[0]][r[1]][r[2]];for(l in b.drop)if(i.target_item[l]&&f[l].length!==1&&k.drop[l]){p=!0;u[s].need_optimize=!0;break}p&&(v||(v=!0),u[n].need_optimize===undefined&&(u[n].need_optimize=!0,y.push(u[n])),y.push(u[s]))}v?e.push(y):c.push(u[n])}}function k(){var e,s,c,u,o;for(e in f){if(!f[e].length){n.no_support.item_list[e]=i.target_item[e];n.no_support.length+=1;continue}s=i.target_item[e];u=f[e][0].type;c=t[u[0]][u[1]][u[2]];o=Math.ceil(s/c.drop[e]);r[u[0]]===undefined&&(r[u[0]]={});r[u[0]][u[1]]===undefined&&(r[u[0]][u[1]]={});r[u[0]][u[1]][u[2]]===undefined?r[u[0]][u[1]][u[2]]=o:r[u[0]][u[1]][u[2]]<o&&(r[u[0]][u[1]][u[2]]=o)}a=h(r)}function d(){var a,c,p,y,w,l,b,o,d,nt,u,tt;if(k(),e.length!==0){for(p in e){for(y=g(e[p]),c=null,a=0;a<v;a+=1)w=new JIE.optimization.PSO(y),l=w.play(),c===null?c=l:c.fit>l.fit&&(c=l);b=it(c,y.quest_list);JIE.base.margeDeep(n.quest_count_list,b)}function it(n,t){var r={},i;for(var u in t)i=t[u].type,r[i[0]]===undefined&&(r[i[0]]={}),r[i[0]][i[1]]===undefined&&(r[i[0]][i[1]]={}),r[i[0]][i[1]][i[2]]=n.args[u];return r}n.item_list=s(n.quest_count_list);for(o in i.target_item)n.item_list[o]>i.target_item[o]||f[o].length&&(d=i.target_item[o]-(n.item_list[o]||0),u=f[o][0].type,tt=t[u[0]][u[1]][u[2]],nt=Math.ceil(d/tt.drop[o]),n.quest_count_list[u[0]]===undefined&&(n.quest_count_list[u[0]]={}),n.quest_count_list[u[0]][u[1]]===undefined&&(n.quest_count_list[u[0]][u[1]]={}),n.quest_count_list[u[0]][u[1]][u[2]]===undefined&&(n.quest_count_list[u[0]][u[1]][u[2]]=0),n.quest_count_list[u[0]][u[1]][u[2]]+=nt);n.item_list=s(n.quest_count_list);n.AP=h(n.quest_count_list)}else n.quest_count_list=r,n.AP=h(r),n.item_list=s(r);return n}function g(n){function e(){var i={};return i.length=n.length,i.get_fit=function(){for(var f=n.length,r,u=0,i=0;i<f;i++)r=n[i].type,u+=t[r[0]][r[1]][r[2]].AP*arguments[i];return u},i}function o(){for(var h=[],r,o,f,e,s,u=0,c=n.length;u<c;u+=1){f=n[u].type;o=t[f[0]][f[1]][f[2]];r=0;for(e in o.drop)i.target_item[e]&&(s=Math.ceil(i.target_item[e]/o.drop[e]),s>r&&(r=s));h.push({min:0,max:r})}return h}function s(){for(var i=[],t=0,r=n.length;t<r;t+=1)i.push(Math.ceil(u.bound[t].max/10));return i}function h(r,u){var e,s,c,l={},a,h=[],o;JIE.base.extend(h,r);for(e in h){h[e]<u[e].min&&(h[e]=u[e].min);h[e]>u[e].max&&(h[e]=u[e].max);s=n[e].type;c=t[s[0]][s[1]][s[2]];for(o in c.drop)i.target_item[o]&&(l[o]===undefined&&(l[o]=0),l[o]+=c.drop[o]*h[e])}for(o in i.target_item)if((l[o]||0)<i.target_item[o]){if(!f[o].length)continue;a=i.target_item[o]-l[o];s=f[o][0].type;c=t[s[0]][s[1]][s[2]];for(e in n)n[e].type.toString()===s.toString()&&(h[e]+=Math.ceil(a/c.drop[o]))}return h}function c(){var f,e=[],o=0,i,u;for(f in n)i=n[f].type,u=r[i[0]]&&r[i[0]][i[1]]&&r[i[0]][i[1]][i[2]]?r[i[0]][i[1]][i[2]]:0,e.push(u),o+=t[i[0]][i[1]][i[2]].AP*u;return{args:e,fit:o}}var u={};return u.quest_list=n,u.fn=e(),u.bound=o(),u.v_max=s(),u.fixed_method=h,u.is_integer=!0,u.is_minimazation=!0,u.g_best=c(),u.p_max=40,u.iter_max=4e3,u.no_change_limit=20,u}function s(n){var u={},i,e,o,r,f,s;for(r in n)for(f in n[r])for(s in n[r][f])if(e=n[r][f][s],e){o=t[r][f][s];for(i in o.drop)u[i]===undefined&&(u[i]=0),u[i]+=e*o.drop[i]}return u}function h(n){var i,r,u,f=0,e;for(i in n)for(r in n[i])for(u in n[i][r])e=n[i][r][u],f+=t[i][r][u].AP*e;return f}var o=FGO.normal.quest_data_manager(),i=null,l=o.get_all_quest_list(),t=null,u=null,f=null,e=[],c=[],r=null,n=null,a=0,v=3;return{set_data:function(n){i=n},get_minimization:function(){return y()}}};