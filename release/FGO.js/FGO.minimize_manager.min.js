FGO.minimize_manager=function(){for(var p,o={},u={},s={},h=new JIE.event.Publisher("finish",this),f=null,c=3,t=[],i=null,y=null,n={},r=null,l=null,a=null,v=[],e=0;e<c;e+=1)v[e]=new Worker("release/FGO.js/FGO.PSO.js"),v[e].addEventListener("message",function(n){h.fire(n.data)},!1);var w=function(n){u=n;o=f.get_specify_quest_list({get_CP:!1,schedule:!0,item:!0,event:!0});s=f.get_specify_item2quest_list({get_CP:!1,schedule:!0,item:!0,event:!0});b()},b=function(){var n={};for(var t in u)n[t]=s[t];k(n)},k=function(n){function k(){for(var e=!1,t,n,h,f,a;!e;){for(f in i.item_list){t=i.item_list[f];item2quest=c[t];s.push(t);r[t]||(r[t]=!0);for(a in item2quest)if(n=item2quest[a].type,l[n[0]]&&l[n[0]][n[1]])continue;else l[n[0]]||(l[n[0]]={}),l[n[0]][n[1]]=1,i.quest_list.push(n)}if(i.item_list.length===0)e=!0;else{i.item_list=[];for(f in i.quest_list){n=i.quest_list[f];h=o[n[0]][n[1]];for(t in h.drop_list)u[t]&&!r[t]&&(r[t]=!0,i.item_list.push(t))}}}}var c=n,i={item_list:[],quest_list:[]},l={},r={},s=[],a=[],e,w,b,f,h,v,y,p;for(f in c)r[f]=!1;for(f in c)r[f]||(i.item_list=[],i.quest_list=[],s=[],i.item_list.push(f),k(),a.push(s));e={};v=[];t=[];for(s in a){e={};v=[];for(w in a[s]){f=a[s][w];for(b in c[f])h=c[f][b],e[h.type[0]]||(e[h.type[0]]={}),e[h.type[0]][h.type[1]]||(e[h.type[0]][h.type[1]]=1)}for(y in e)for(p in e[y])v.push([y,p]);t.push({item_list:a[s],quest_list:v})}},d=function(e){function b(){r=null;l=0;var f,n,e={};for(f in t[i].item_list)n=t[i].item_list[f],e[n]=u[n];for(p=0,w=c;p<w;p+=1)v[p].postMessage({team:t[i],quest_list:o,item2quest_list:s,target_items:e})}function k(t){var f,u,e,o;if(l+=1,(!r||r.fit>t.fit)&&(r=t),!(l<c)){i+=1;f=r.quest_times;for(u in f){n[u]||(n[u]={});for(e in f[u])n[u][e]&&(o=1),n[u][e]=f[u][e]}a+=r.fit;i<y?d():g()}}function d(){b()}function g(){h.clear_all_subscribe();e&&e({times_list:n,AP:a,item_list:f.get_played_result_items(n)})}var p,w;i=0;y=t.length;n={};a=0;h.subscribe(function(n,t){k(t[0])});b()};return p=function(n){f=n},{set_target_item_list:w,get_result:d,set_quest_manager:p}}();