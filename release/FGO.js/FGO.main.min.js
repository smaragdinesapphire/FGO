function main(){function y(n){var t=v[n];e.set_content({item_name:n,list:t});e.show();e.refresh()}function a(n){var t=document.getElementById(n);window.scrollTo(0,t.offsetTop)}var u,t,i,f,o,c,n,r,l,p;JIE.isDebug=!0;u=FGO.cookie;t=FGO.language_manager;t.set_language(u.load_language());i=FGO.info_manager;f=FGO.minimize_manager;f.set_quest_manager(i);var v=i.get_item2quest_list(),s=document.querySelector("#content"),h=NewObj("div","main_content"),e=FGO.component.factory("Dialog");e.hide();e.render(s);o=new FGO.panel.Processing_dialog_panel;o.hide();o.render(s);c=new FGO.panel.Header_panel;c.onChange.subscribe(function(n,t){u.save_language(t[0]);location.reload()});c.render(s);n=new FGO.panel.User_input_panel;n.render(h);n.onInfoClick.subscribe(function(n,i){y(t.get_JP_word(i[0]))});n.onOtherChange.subscribe(function(n,t){i.set_event(t[0]);v=i.get_specify_item2quest_list({event:!0,get_CP:!1})});n.onCalculate.subscribe(function(){function ut(n){var h={},f,i,u,e,s,c;for(f in n.item_list)h[t.get_word(f)]=n.item_list[f];i={};for(u in n.times_list){s=t.get_word(u);i[s]={};for(e in n.times_list[u])i[s][t.get_word(e)]=n.times_list[u][e]}c={AP:n.AP,times_list:i,item_list:h};r.set_target_item_list(w);r.set_value(c);r.show();r.refresh();a("result_panel");o.hide()}var c=n.get_result(),e,d=!1,u,p,w={},s={},y,h,l,b,nt,k,tt;for(e in c.item_list)c.item_list[e]&&(d||(d=!0),w[t.get_JP_word(e)]=c.item_list[e]);if(d){o.show();var g=[],v=i.get_schedule_list(),rt=t.get_JP_word(c.other_setting.schedule);for(u=0,p=v.length;u<p;u+=1)if(v[u]!==rt)g.push(v[u]);else{g.push(v[u]);break}y=null;for(e in c.other_setting.event)s[t.get_JP_word(e)]=c.other_setting.event[e];for(h=[],s["曜日クエスト"]||s["フリークエスト"]?(s["曜日クエスト"]&&h.push({"曜日クエスト":1,"フリークエスト":0}),s["フリークエスト"]&&h.push({"曜日クエスト":0,"フリークエスト":1}),s["曜日クエスト"]&&s["フリークエスト"]&&h.push({"曜日クエスト":1,"フリークエスト":1})):h.push({"曜日クエスト":0,"フリークエスト":0}),l=[],b=0,nt=h.length;b<nt;b+=1)for(k=0,tt=g.length;k<tt;k+=1)l.push({event_status:h[b],schedule:v[k]});u=0;p=l.length;it();function it(){i.set_target_item_list(w);i.set_schedule(l[u].schedule);f.set_event_status(l[u].event_status);f.set_target_item_list(w);f.get_result(function(n){if((!y||y.AP>n.AP)&&(y=n,l[u].schedule==="冬木"))1;u+=1;u<p?it():ut(y)})}}});n.onSave.subscribe(function(){var t=n.get_result();u.save_user_setting(t)});n.onLoad.subscribe(function(){var t=u.load_user_setting();n.set_user_setting(t)});n.onReset.subscribe(function(){a("user_input_panel")});r=new FGO.panel.Result_panel;r.onInfoClick.subscribe(function(n,i){y(t.get_JP_word(i[0]))});r.hide();r.render(h);l=NewObj("div","top","Top");l.onclick=function(){a("header_panel")};h.appendChild(l);s.appendChild(h);n.refresh();p=document.querySelector("#footer");p.style.display=""}window.onload=function(){main()};