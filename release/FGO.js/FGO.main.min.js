function main(){function y(n){var t=v[n];o.set_content({item_name:n,list:t});o.show();o.refresh()}function a(n){var t=document.getElementById(n);window.scrollTo(0,t.offsetTop)}var f,t,i,e,u,c,n,r,l,p;JIE.isDebug=!0;f=FGO.cookie;t=FGO.language_manager;t.set_language(f.load_language());i=FGO.info_manager;e=FGO.minimize_manager;e.set_quest_manager(i);var v=i.get_item2quest_list(),s=document.querySelector("#content"),h=NewObj("div","main_content"),o=FGO.component.factory("Dialog");o.hide();o.render(s);u=new FGO.panel.Processing_dialog_panel;u.hide();u.render(s);c=new FGO.panel.Header_panel;c.onChange.subscribe(function(n,t){f.save_language(t[0]);location.reload()});c.render(s);n=new FGO.panel.User_input_panel;n.render(h);n.onInfoClick.subscribe(function(n,i){y(t.get_JP_word(i[0]))});n.onOtherChange.subscribe(function(n,t){i.set_event(t[0]);v=i.get_specify_item2quest_list({event:!0,get_CP:!1})});n.onCalculate.subscribe(function(){function ut(n){var h={},e,i,f,o,s,c;for(e in n.item_list)h[t.get_word(e)]=n.item_list[e];i={};for(f in n.times_list){s=t.get_word(f);i[s]={};for(o in n.times_list[f])i[s][t.get_word(o)]=n.times_list[f][o]}c={AP:n.AP,times_list:i,item_list:h};r.set_target_item_list(w);r.set_value(c);r.show();r.refresh();a("result_panel");u.hide()}var c=n.get_result(),o,d=!1,f,l,w={},s={},y,h,p,b,nt,k,tt;for(o in c.item_list)c.item_list[o]&&(d||(d=!0),w[t.get_JP_word(o)]=c.item_list[o]);if(d){u.show();var g=[],v=i.get_schedule_list(),rt=t.get_JP_word(c.other_setting.schedule);for(f=0,l=v.length;f<l;f+=1)if(v[f]!==rt)g.push(v[f]);else{g.push(v[f]);break}y=null;for(o in c.other_setting.event)s[t.get_JP_word(o)]=c.other_setting.event[o];for(h=[],s["曜日クエスト"]||s["フリークエスト"]?(s["曜日クエスト"]&&h.push({"曜日クエスト":1,"フリークエスト":0}),s["フリークエスト"]&&h.push({"曜日クエスト":0,"フリークエスト":1}),s["曜日クエスト"]&&s["フリークエスト"]&&h.push({"曜日クエスト":1,"フリークエスト":1})):h.push({"曜日クエスト":0,"フリークエスト":0}),p=[],b=0,nt=h.length;b<nt;b+=1)for(k=0,tt=g.length;k<tt;k+=1)p.push({event_status:h[b],schedule:v[k]});f=0;l=p.length;it();function it(){u.set_schedule("("+f+"/"+l+")");i.set_target_item_list(w);i.set_schedule(p[f].schedule);e.set_event_status(p[f].event_status);e.set_target_item_list(w);e.get_result(function(n){(!y||y.AP>n.AP)&&(y=n);f+=1;f<l?it():ut(y)})}}});n.onSave.subscribe(function(){var t=n.get_result();f.save_user_setting(t)});n.onLoad.subscribe(function(){var t=f.load_user_setting();n.set_user_setting(t)});n.onReset.subscribe(function(){a("user_input_panel")});r=new FGO.panel.Result_panel;r.onInfoClick.subscribe(function(n,i){y(t.get_JP_word(i[0]))});r.hide();r.render(h);l=NewObj("div","top","Top");l.onclick=function(){a("header_panel")};h.appendChild(l);s.appendChild(h);n.refresh();p=document.querySelector("#footer");p.style.display=""}window.onload=function(){main()};