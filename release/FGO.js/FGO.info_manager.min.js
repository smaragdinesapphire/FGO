FGO.info_manager=function(){function u(n){var i={},u,f,t,r;for(u in n)for(f in n[u]){r=n[u][f];for(t in r.drop_list)i[t]===undefined&&(i[t]=[]),i[t].push({type:[u,f],CP:r.drop_list[t]/r.AP,AP:r.AP,P:r.drop_list[t]})}for(t in i)i[t].sort(function(n,t){return t.CP-n.CP});return i}function tt(t){var r={},u,f,i;for(u in t)for(f in t[u])i=t[u][f].type,r[i[0]]||(r[i[0]]={}),r[i[0]][i[1]]||(r[i[0]][i[1]]=JIE.base.extendDeep({},n.quest_list[i[0]][i[1]]));return r}function s(n){var f={},e=[],o=[],t,s,r,i={},u={},h;for(t in n){e=[];for(s in n[t])e.indexOf(n[t][s].AP)===-1&&e.push(n[t][s].AP);e.sort(function(n,t){return n-t});o=[];for(s in e){i=null;for(r in n[t])(u=n[t][r],o.indexOf(r)===-1)&&e[s]===u.AP&&(!i||u.CP>=i.CP?i=u:o.push(r));if(i)for(r in n[t])o.indexOf(r)===-1&&(u=n[t][r],u.AP>=i.AP&&(h=Math.floor(u.AP/i.AP),i.P*h>u.P&&o.push(r)));i&&(f[t]||(f[t]=[]),f[t].push(i))}f[t].length>1&&f[t].sort(function(n,t){return n.CP-t.CP})}return f}function it(n){return{item_list:get_played_result_item(n),AP:h(n)}}function h(t,i){var h=0,c=null,r,f,l,e={},o,a,s;for(var u in n.event_list)r=n.event_list[u],e[r]=i[r]||0;for(r in t){o=1;s=0;for(u in e)if(e[u]){for(a in n.quest_type[u])if(n.quest_type[u][a]===r){s=1;break}if(s){o=.5;break}}for(f in t[r])c=n.quest_list[r][f],l=t[r][f],h+=Math.floor(c.AP*o)*l}return h}function rt(t){var u={},e=null,i,f,r,o;for(i in t)for(f in t[i])if(t[i][f]){e=n.quest_list[i][f];o=t[i][f];for(r in e.drop_list)u[r]||(u[r]=0),u[r]+=e.drop_list[r]*o}return u}var f,r={},e={},n={quest_list:{},quest_type:{},event_list:["曜日クエスト","フリークエスト"],event_state:{},less_schedule:null,item2quest_list:{},item_list:{}},t,i;for(f in n.event_list)n.event_state[n.event_list[f]]=0;t={event_state:JIE.base.extendDeep({},n.event_state),schedule:n.less_schedule,item_list:{}};i=function(n){this.quest_list=n;this.decorators_list=[]};i.decorators={};i.prototype.decorate=function(n){this.decorators_list.push(n)};i.prototype.get_list=function(){for(var t=this.quest_list,u=this.decorators_list.length,r,n=0;n<u;n+=1)r=this.decorators_list[n],t=i.decorators[r].get_list(t);return t};i.decorators.schedule={get_list:function(i){var f={},u,r,e;for(u in n.quest_type["曜日クエスト"])r=n.quest_type["曜日クエスト"][u],f[r]=JIE.base.extendDeep({},i[r]);e=n.quest_type["フリークエスト"].indexOf(t.schedule);for(u in n.quest_type["フリークエスト"])if(r=n.quest_type["フリークエスト"][u],f[r]=JIE.base.extendDeep({},i[r]),Number(u)===e)break;return f}};i.decorators.item={get_list:function(n){var f,e=!1,r,i,u;for(f in t.item_list){e=!0;break}if(!e)return n;r={};for(i in n)for(u in n[i])for(f in t.item_list)if(n[i][u].drop_list[f]){r[i]||(r[i]={});r[i][u]=JIE.base.extendDeep({},n[i][u]);break}return r}};i.decorators.event={get_list:function(i){var r,u,f,e;for(r in t.event_state)if(t.event_state[r])for(e in n.quest_type[r]){u=n.quest_type[r][e];for(f in i[u])i[u][f].AP=Math.floor(i[u][f].AP/2)}return i}};var c=function(t){n.quest_list=t.list;n.quest_type=t.type;n.item2quest_list=u(t.list)},l=function(t){n.item_list=t},a=function(){return JIE.base.extendDeep({},n.quest_list)},o=function(t){var r=JIE.base.extendDeep({},n.quest_list);return r=new i(r),(!t||t.schedule)&&r.decorate("schedule"),(!t||t.item)&&r.decorate("item"),(!t||t.event)&&r.decorate("event"),r.get_list()},v=function(n){var t=o(n);return n&&!n.get_CP?t:(r=s(u(t)),e=tt(r),JIE.base.extendDeep({},e))},y=function(n){var t=o(n);return tmp_item2quest_list=u(t),n&&!n.get_CP?tmp_item2quest_list:(r=s(tmp_item2quest_list),JIE.base.extendDeep({},r))},p=function(){return JIE.base.extendDeep({},n.item_list)},w=function(n){t.schedule=n},b=function(){return JIE.base.extendDeep([],n.quest_type["フリークエスト"])},k=function(n){t.item_list=n},d=function(){return JIE.base.extendDeep([],n.event_list)},g=function(n){for(var i in t.event_state)t.event_state[i]=n[i]||0},nt=function(){return JIE.base.extendDeep({},n.item2quest_list)};return{set_quest_info:c,set_item_list:l,get_all_quest_list:a,get_specify_quest_list:v,get_item_list:p,set_schedule:w,get_schedule_list:b,set_target_item_list:k,get_event_list:d,set_event:g,get_item2quest_list:nt,get_specify_item2quest_list:y,get_played_result:it,get_played_result_AP:h,get_played_result_items:rt}}();