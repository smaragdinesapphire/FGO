FGO.minimize_manager=function(){for(var w,o={},f={},s={},y={},h=new JIE.event.Publisher("finish",this),u=null,c=10,t=[],i=null,p=null,n={},r=null,l=null,a=null,v=[],e=0;e<c;e+=1)v[e]=new Worker("release/FGO.js/FGO.PSO.js"),v[e].addEventListener("message",function(n){h.fire(n.data)},!1);var b=function(n){y=n;u.set_event(n)},k=function(n){f=n;o=u.get_specify_quest_list({get_CP:!1,schedule:!0,item:!0,event:!0});s=u.get_specify_item2quest_list({get_CP:!1,schedule:!0,item:!0,event:!0});d()},d=function(){var n={};for(var t in f)n[t]=s[t];g(n)},g=function(n){function k(){for(var e=!1,t,n,h,u,a;!e;){for(u in i.item_list){t=i.item_list[u];item2quest=c[t];s.push(t);r[t]||(r[t]=!0);for(a in item2quest)if(n=item2quest[a].type,l[n[0]]&&l[n[0]][n[1]])continue;else l[n[0]]||(l[n[0]]={}),l[n[0]][n[1]]=1,i.quest_list.push(n)}if(i.item_list.length===0)e=!0;else{i.item_list=[];for(u in i.quest_list){n=i.quest_list[u];h=o[n[0]][n[1]];for(t in h.drop_list)f[t]&&!r[t]&&(r[t]=!0,i.item_list.push(t))}}}}var c=n,i={item_list:[],quest_list:[]},l={},r={},s=[],a=[],e,w,b,u,h,v,y,p;for(u in c)r[u]=!1;for(u in c)r[u]||(i.item_list=[],i.quest_list=[],s=[],i.item_list.push(u),k(),a.push(s));e={};v=[];t=[];for(s in a){e={};v=[];for(w in a[s]){u=a[s][w];for(b in c[u])h=c[u][b],e[h.type[0]]||(e[h.type[0]]={}),e[h.type[0]][h.type[1]]||(e[h.type[0]][h.type[1]]=1)}for(y in e)for(p in e[y])v.push([y,p]);t.push({item_list:a[s],quest_list:v})}},nt=function(e){function k(){r=null;l=0;var u,n,e={};for(u in t[i].item_list)n=t[i].item_list[u],e[n]=f[n];for(w=0,b=c;w<b;w+=1)v[w].postMessage({team:t[i],quest_list:o,item2quest_list:s,target_items:e,event:y})}function d(t){var f,u,e,o;if(l+=1,(!r||r.fit>t.fit)&&(r=t),!(l<c)){i+=1;f=r.quest_times;for(u in f){n[u]||(n[u]={});for(e in f[u])n[u][e]&&(o=1),n[u][e]=f[u][e]}a+=r.fit;i<p?g():nt()}}function g(){k()}function nt(){h.clear_all_subscribe();e&&e({times_list:n,AP:a,item_list:u.get_played_result_items(n)})}var w,b;i=0;p=t.length;n={};a=0;h.subscribe(function(n,t){d(t[0])});k()};return w=function(n){u=n},{set_target_item_list:k,get_result:nt,set_quest_manager:w,set_event_status:b}}();